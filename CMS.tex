\chapter{The CMS detector} % (fold)
\label{cha:the_cms_detector}
\begin{figure}[htbp]
  \centering
    \includegraphics[width=0.9\textwidth]{figures/CMS/cmsDetector.png}
  \caption{A perspective view of the \ac{cms} detector\mcite{cms-sketchup}.}
  \label{fig:figures_CMS_cmsDetector}
\end{figure}

The Compact Muon Solenoid (CMS) detector was designed and built to study proton-proton interactions at the \ac{lhc}, with the aim of discovering the Higgs boson and searching for beyond the \ac{sm} physics signals. The detector is a traditional onion layer design, with high precision tracking detectors nearest the interaction point and high energy resolution calorimetric detectors in the outer layers. Due to the predicted presence of missing energy \MET in new
physics models, energy measurement over the full $\eta$ range is required. As
alluded to in the name the possibilities of the new physics models containing
muons and the ``golden'' Higgs decay channel
\HepProcess{\PH\to\PZ\PZ\to\Pmu\Pmu\Pmu\Pmu} and \PZprime models, the detector
was designed to accurately reconstruct muons with \PT of up to \unit{1}{\TeV}.
Due to the ability to distinguish these
leptons from the large amount of hadronic fragmentation caused by smashing two
protons together, at a centre of mass energy of \unit{14}{\TeV}. The \ac{cms}
Electromagnetic calorimeter, was also designed to have precise energy
measurement and fine grain spatial resolution. This design feature was
motivated by the Higgs decay channel \HepProcess{\PH\to\Pphoton\Pphoton}. The
other new feature of \ac{cms}, is the use of silicon detectors throughout for
particle tracking. These give precise track reconstruction abilities and the
associated fine grain resolution in both position and momentum. All the
sub-detectors save the muon system, are contained within the barrel of a
\unit{4}{\tesla} superconducting solenoid. This magnet provides the particle
track bending required for momentum and lepton charge measurement. In this
section the key detector elements and their design parameters are discussed.

\section{The Silicon Tracker} % (fold)
\label{sec:the_silicon_tracker}
\begin{figure}[htbp]
  \centering
    \includegraphics[width=0.5\textwidth]{figures/CMS/tracker.png}
  \caption{The \ac{cms} tracking system, pixel detectors are situated at the
  centre of the detector closest to the interaction point, surrounded by layers
  of silicon strip detectors\mcite{cms-sketchup}.}
  \label{fig:figures_CMS_tracker}
\end{figure}

The design goal for the \ac{cms} tracking system, was to produce a system that
can precisely and efficiently measure the trajectories of charged particles
produced in \ac{lhc} collisions. The tracking system surrounds the collision
point and has a length of \unit{5.8}{\meter} and a diameter of
\unit{2.5}{\meter}. At the \ac{lhc}'s design instantaneous luminosity of
\unit{10$^{34}$}{\lumiunits}, an average of 1000 charged particles from more
than 20 proton-proton interactions will be produced per \unit{25}{\nano\second}
bunch crossing. This imposes the requirements of high granularity, so that the
individual particles and their trajectories can be distinguished and a fast
response, so that the hits can be assigned to the correct bunch crossing. The
technical implications of these requirements imply both, a large amount of
on-detector electronics and their associated cooling equipment. This large
amount of tracker material increases the multiple scattering, bremsstrahlung,
photon conversion and nuclear interactions of the particles which are
traversing the tracking system. This in turn limits the position and energy
resolution of the calorimeter systems. A compromise between the material budget
of the tracking system, the desired features and the requirement for the
tracking system to have an expected life time of 10 years in a high radiation
environment, resulted in the construction of the tracking system using
only solid state silicon detector technology.

The \ac{cms} tracking system is formed of a pixel detector with three layers
situated between at radii of \unit{4.4}{\cm} and \unit{10.2}{\cm} from the interaction point
and a silicon strip tracker with 10 barrel layers extending outwards to a
radius of \unit{1.1}{\meter} from the interaction point. The barrel layers of
both the pixel and strip detectors are complemented by layers of either pixel
or strip disks, which extend the acceptance of the tracker to \mETA $<$ 2.5. The
resulting structure is that of a detector with \unit{200}{\squaremetre} of
active silicon, which makes the \ac{cms} tracker the largest detector of its
type ever constructed.

The individual pixels that comprise the pixel detector are 100 $\times$
150 $\micro\textrm{m}^{2}$, which corresponds to an occupancy of around
10$^{-4}$ per bunch crossing. The detector cell size for the microstrip
detectors at a radius between \unit{20-55}{\cm} is \unit{10}{\cm} $\times$
\unit{180}{\micro\meter} which leads to an average occupancy of 2-3$\%$.
Further out at a radius greater than \unit{55}{\cm}  the minimum cell size is
increased to \unit{25}{\cm} $\times$ \unit{180}{\micro\meter} with an occupancy
of around 1$\%$. The tracker performance is extensively documented in
\mcite{cmstracking}.

% section the_silicon_tracker (end)

\section{The Electromagnetic Calorimeter (ECAL)} % (fold)
\label{sec:the_electromagnetic_calorimeter}
The \ac{cms} electromagnetic calorimeter\mcite{ref:cmsecaltdr} is a hermetic,
homogeneous calorimeter constructed from lead tungstate (PbWO$_{4}$) crystals.
The ECAL is split into two parts, a barrel covering $|\eta| < 1.479$ read out
by avalanche photodiodes and the two end-caps covering $1.479 < |\eta| < 3.0$,
read out by vacuum photo-triodes.

Lead tungstate crystals were chosen because of their short radiation length,
fast scintillation and radiation hardness. During the research and development
program it was shown that, radiation damage does not affect the scintillation
method or the uniformity of the emitted light yield along the crystal, it only
effects the transparency, through the creation of colour centres. This will be
monitored throughout the lifetime of the ECAL via a light injection
system\mcite{Smith:2000p5245}.

The barrel crystals have a front face of \unit{22 $\times$ 22}{\mm\squared},
this corresponds to the MoliÃ©re radius of $\approx $ \unit{22}{\mm}; with a
length of \unit{230}{\mm} giving a each crystal length of $25.8 X_{0}$, where
$X_{0}$ is amount of material required for 68$\%$ of an electromagneticly
interacting particle's energy to be radiated, in the form of bremsstrahlung or
pair production whilst traversing that material. For lead tungstate this length
is $X_{0}= \unit{0.89}{\cm}$. They are arranged in 36 super-modules, forming
two half barrels. The crystal axes are skewed at \unit{3}{\degree} with respect
to the vertex and each covers \unit{1}{\degree} in $\phi$ and $\eta$

The endcap crystals are arranged in two semi-circular `Dees', groups of
$5\times 5$ crystals are canter-levered on a aluminium backing plate. The
crystals are again skewed with regard to the interaction vertex, however they
are arranged in an $x-y$ grid rather than a $\phi - \eta$ grid. The crystal
dimensions are different to the barrel, in that the cross section is \unit{28.6
$\times$ 28.6}{\mm\squared}, with a length of \unit{220}{\mm} corresponding to
24.7 radiation lengths

In addition to the ECAL there is a pre-shower detector situated at $1.653 <
\mETA < 2.6$. This provides identification of isolated electrons against
electrons produced in showers. Each particle passes though the detector leaving
a minimum ionising track, or hit. The number of these hits per area gives
information on the isolation of the particle and improves the position
measurement of electrons and photons in the ECAL endcaps.
\begin{figure}[ht]
  \centering
    \includegraphics[width=0.75\textwidth]{figures/CMS/laser_history_2011-12.png}
  \caption{Relative response to laser light (440 nm) measured by the ECAL laser
monitoring system, averaged over all crystals in bins of pseudo-rapidity, for
the 2011 and 2012 data taking periods
The response change observed in the ECAL channels is of the order of a few
percent in the barrel, while it reaches up to 25$\%$ in the most forward endcap
regions used for electron and photon reconstruction. The response change is up
to 60$\%$ in channels closest to the beam pipe. These measurements are used to
correct the physics data. \\ The bottom plot shows the instantaneous \ac{lhc}
luminosity delivered during this time period.\mcite{CMS-DP-2012-015}}
  \label{fig:figures_CMS_laser_history_2011-12}
\end{figure}

Figure~\ref{fig:figures_CMS_laser_history_2011-12} shows the change in response
of the ECAL during running, due to the formation of colour centres, this
response is measured using laser light at 440 nm and is used to correct the
energies recorded in data during each run to form a uniform response.
The ECAL performance in 2011 is extensively documented in \mcite{CMS-DP-2012-002}.
% section the_electro_magnetic_calorimeter (end)

\section{The Hadronic Calorimeter (HCAL)} % (fold)
\label{sec:the_hadronic_calorimeter}
The design of the \ac{cms} HCAL is constrained by the size requirements of
fitting the tracking system, ECAL and HCAL inside the solenoid magnet. The HCAL
is situated between the ECAL which ends at a radius of \unit{1.77}{\meter} and
the solenoid which starts at a radius of \unit{2.95}{\meter}. This constraint
limits the amount of material which can be put in place to fully contain the
hadronic showers. To overcome this an outer layer of instrumentation is placed
outside of the magnet and cryogenic system, in order to fully contain hadronic 
showers. The full containment of the hadronic objects is necessary for precise 
missing energy measurement, which is a key discriminatory feature for new 
physics models with undetectable final state particles.

The hadronic calorimeter is split into three sub detectors, the hadronic
barrel (HB) \mETA $< 1.3$ , hadronic endcaps (HE) $1.3 < \mETA < 3.0$ and a
forward calorimeter (HF) $3.0 < \mETA < 5.5$.

The HB and HE compriseals of layered tiles of brass absorber plates
interspaced with scintillator plates which are read out by wavelength shifting
fibres. The total absorber thickness varies between 5.2 and 10.6 interaction
lengths, the ECAL adds approximately one extra interaction length. The
scintillators are segmented into towers of area $\Delta\eta\times\Delta\phi =
0.087\times0.087$ in the barrel and $\Delta\eta\times\Delta\phi =
0.17\times0.17$ in the endcaps. The light produced in the scintillators is
merged in the wavelength shifting fibres and then read out using hybrid
photo-diodes. The HF is constructed from radiation hard quartz fibres, this
enables the detector to survive in the very forward regions of the detector
where high levels of radiation are experienced.

The hadronic outer (HO) which is situated outside the solenoid used the
solenoid coils as an extra absorber adding extra interaction lengths in the
barrel region ensuring full containment of hadronic showers. The HO is
constructed from layers of scintillator tiles, the light from which is then merged in the wavelength shifting fibres and read out using hybrid photo-diodes.
HCAL performance is documented in \mcite{CMS-DP-2010-025}.
% section the_hadronic_calorimeter (end)


\section{The Superconducting Solenoid} % (fold)
\label{sec:the_cms_super_conducting_solenoid}
The requirement for precise muon momentum measurements, for muons with \PT $>$
\unit{1}{\TeV} infers the requirement of large bending power, this requirement
forces the choice of a superconducting magnet. The \ac{cms} magnet is
\unit{13}{\meter} long, has an inner diameter of \unit{6}{\meter} and provides
a \unit{4}{\tesla} magnetic field, which gives a bending power of
\unit{12}{\tesla\meter} before the muon bending angle is measured by the muon
system. The bore of the solenoid contains the tracking and calorimeter systems.
The magnet is constructed from Niobium-Titanium superconductor embedded in an
aluminium stabiliser, it is coiled in four layers resulting in \unit{220}{\ton} 
of cold mass. This is then cooled to around \unit{4}{\kelvin} using liquid 
helium and a current of $\approx$\unit{20}{\kilo\ampere} is applied to generate 
the magnetic field.
% section the_cms_super_conducting_solenoid (end)

\section{The  Muon system} % (fold)
\label{sec:the_cms_muon_system}
The \ac{cms} muon system, is designed to provide accurate muon \PT measurements
($\sigma(\PT)/\PT < 0.1$) for muons over a large \PT range. Due to the
cylindrical nature of the solenoid, the muon system is also designed to be
cylindrical. The muon system has three purposes. The first is the identification
of muons. The second is the momentum measurement of these muons. The third is to
provide information to the trigger system.
The muon system uses three types of gaseous detectors for particle tracking and
identification. In the barrel region where the magnetic field is uniform, drift
chambers (DT) are used, these cover the region $\mETA < 1.2$ and are
interspaced between the layers of the magnetic flux return plates. In the 
endcap regions where the muon and background rates are higher and the magnetic
field is non-uniform, cathode strip chambers (CSC) are are used due to their
fast response, radiation hardness and fine grain segmentation. The CSCs cover
$0.9 < \mETA < 2.4$. Due to the initial uncertainty on the background rates and
the \unit{25}{\nano\second} bunch crossing intervals expected when the \ac{lhc}
is running under design conditions, a complementary dedicated muon triggering
system consisting of \ac{rpc} was added in the range $\mETA < 1.6$. The
\ac{rpc}s provide a fast, independent and fine grain system from
which to trigger on muon objects in the harshest of running conditions.

Due to multiple scattering and the shear quantity of detector material before
the first muon station, momentum measurement using the muon system only is
accurate to a level of $\approx10\%$ below \unit{200}{\GeV} and accurate to a
level of $15-40\%$, \mETA dependent  for \unit{1}{\TeV} muons. When including
the tracker information in the muon momentum measurement the resolution is
improved to $\approx1\%$ below \unit{200}{\GeV} and to about $5\%$ for
\unit{1}{\TeV} muons. The performance of the \ac{cms} muon system is detailed
in \mcite{cmsMuPerf}.
% section the_cms_muon_system (end)

\section{The \Lone Trigger System} % (fold)
\label{sec:the_level_one_trigger_system}
The \ac{cms} trigger system is designed in two levels. The first, the \Lone
trigger is built using custom electronics and is designed to reduce the input
rate of 40 million events per second, to a manageable rate of 100 thousand
events per second. Information from only the calorimeter and muon systems is
considered as the time required to read out the tracking information is
prohibitive at this level. Two separate trigger systems, one performing
triggering on the calorimeter system, the other performing triggering on the
muon systems are employed. For a detailed discussion of the calorimeter
triggering algorithms and their performance see
Chapter~\ref{cha:level_one_trigger}. The information from these two sub
triggers is passed to the global trigger, where the decision to accept the
event or not is made.
The muon trigger considers information from each of the DT, CSC and \ac{rpc}
muon systems. Tracks are created from the hits in each of the sub systems and
fitted. The muon momentum is then calculated from the radius of curvature of
these muons. The four highest \PT muon candidates are then passed to the global
trigger.
Electron and photon candidates are created by the regional calorimeter trigger.
The Global Calorimeter Trigger creates jet candidates, energy and missing energy sums. The four highest \ET jet candidates of each type, central, tau and forward, the energy sums and the electron/photon candidates are then passed to the global trigger, where the final trigger decisions are made. These decisions can require information from a single detector or can require coincident objects, such as the requirement of an energy sum value and a muon.
% section the_level_one_trigger_system (end)

\section{The High Level Trigger System} % (fold)
\label{sec:the_high_level_trigger_system}
The \ac{hlt} system is constructed from off the shelf components.
The system is composed of two sets of machines. The first are the Event Builder
(EB) units, these build raw data into regional chunks from the data read out
at the front end of the detector when a \Lone accept is received, this is then 
combined and transmitted to the Event Filter (EF) cluster. The EB units 
transfer the data to the EF units via a standard TCP/IP gigabit ethernet link.
The task of the EF units is to run complex reconstruction algorithms, using
combined detector information to reduce the accepted data rate to a manageable 
level. The original design anticipated an output rate of 100 events per second, 
however in 2012 running, 1000 events per second were stored, half of this rate 
was assigned to the prompt reconstruction queue, the other half was stored for 
reconstruction during the long shut down of the \ac{lhc} in 2013-2015.

The EF farm is formed from standard rack-mounted PC units, with a total of
approximately 1000 computing cores, operating at a clock frequency of around
\unit{2}{\giga\hertz}. Upon receiving an event, each unit performs the \ac{cms}
reconstruction, using the same software framework as used for offline analysis, meaning that the objects used for trigger decisions are as close in definition to the offline objects as possible. This increases the overall trigger efficiency, however the calibrations used at \ac{hlt} level are not the final derived versions.
Trigger chains are designed so that full event reconstruction can be performed.
However when designing a trigger that requires full tracking reconstruction, 
pre-selection requirements are made before the computationally complex stages 
are performed, if any of these pre-selections are not satisfied the full event 
reconstruction is not performed. The EF farm is connected to a large (several 
hundred terabytes) storage area network, this acts as a temporary storage area 
for the events accepted by the \ac{hlt} before the events are transferred to the tier-zero reconstruction farm, which is located at the central CERN site.


% section the_high_level_trigger_system (end)

% chapter the_cms_detector (end)
